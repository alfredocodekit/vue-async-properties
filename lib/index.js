!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("lodash")):"function"==typeof define&&define.amd?define("VueAsyncProperties",["lodash"],t):"object"==typeof exports?exports.VueAsyncProperties=t(require("lodash")):e.VueAsyncProperties=t(e._)}(this,function(e){return function(e){function t(o){if(n[o])return n[o].exports;var u=n[o]={i:o,l:!1,exports:{}};return e[o].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(t,n){t.exports=e},function(e,t,n){"use strict";function o(e,t){return function(n){return t(n,e)}}function u(e,t,n,o,u,r){var a=t.metaPending,c=t.metaLoading,l=t.metaError,s=this;n=n.bind(this),u=u.bind(this),r=r.bind(this);var d=function(t){(0,i.isNil)(t)?s[e]=o:s[e]=t},f=void 0;if(a){var m=a(e);f=function(e){s[m]=e}}else f=function(e){};var p=c(e),h=function(e){s[p]=e},v=l(e),b=function(e){s[v]=e};return function(){f(!1);var e=n();(0,i.isNil)(e)||"function"!=typeof e.then?(b(null),d(e)):(h(!0),b(null),e.then(function(e){d(u(e))}).catch(function(e){b(e),r(e),d(null)}).then(function(){h(!1)}))}}function r(e){var t=e.metaPending,n=e.metaLoading,o=e.metaError,u=e.metaDefault,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=void 0;a=r?this.$options.asyncData:this.$options.asyncComputed;var c={};return(0,i.each)(a,function(e,i){var a=e.default||null;c[i]=a,r||null===e.debounce||(c[t(i)]=!1),c[n(i)]=!1,c[o(i)]=null,c[u(i)]=e.default||null}),c}Object.defineProperty(t,"__esModule",{value:!0}),t.metaFunctionBuilder=o,t.resolverForGivenFunction=u,t.dataObjBuilder=r;var i=n(0)},function(e,t,n){"use strict";function o(e){return e=(0,i.cloneDeep)(e||{}),(0,i.defaultsDeep)(e,a)}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"function"==typeof e&&(e={get:e}),e=(0,i.cloneDeep)(e||{}),delete e.debounce,null===e.transform&&(e.transform=function(e){return e}),(0,i.defaultsDeep)(e,t,c,l)}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=(0,i.cloneDeep)(e||{}),"number"==typeof e.debounce?e.debounce={wait:e.debounce,options:{}}:null===e.debounce?e.debounce=!1:void 0===e.debounce?e.debounce={}:e.debounce={wait:e.debounce.wait,options:(0,i.pick)(e.debounce,"leading","trailing","maxWait")},null===e.transform&&(e.transform=function(e){return e}),(0,i.defaultsDeep)(e,t,c,s)}Object.defineProperty(t,"__esModule",{value:!0}),t.globalDefaults=o,t.dataDefaults=u,t.computedDefaults=r;var i=n(0),a={meta:function(e,t){return e+"$"+t}},c={transform:function(e){return e.data},error:function(e){console.error(e)}},l={lazy:!1,debounce:!1},s={eager:!1,debounce:{wait:1e3,options:{}}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(4),r=o(u),i=n(5),a=o(i),c={install:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,r.default)(t),o=(0,a.default)(t);e.mixin(n),e.mixin(o)}};t.default=c,"undefined"!=typeof window&&window.Vue&&window.Vue.use(c),e.exports=t.default},function(e,t,n){"use strict";function o(e){var t=(0,i.globalDefaults)(e),n=t.meta,o=(0,r.metaFunctionBuilder)("refresh",n),a=(0,r.metaFunctionBuilder)("loading",n),c=(0,r.metaFunctionBuilder)("error",n),l=(0,r.metaFunctionBuilder)("default",n),s={metaRefresh:o,metaLoading:a,metaError:c,metaDefault:l},d=(0,i.dataDefaults)(e);return{beforeCreate:function(){var e=this,t=this.$options.asyncData;this.$options.methods=this.$options.methods||{};var n=this.$options.methods;(0,u.each)(t,function(t,u){var a=(0,i.dataDefaults)(t,d);n[o(u)]=r.resolverForGivenFunction.call(e,u,s,a.get,a.default,a.transform,a.error)})},beforeMount:function(){var e=this,t=this.$options.asyncData;(0,u.each)(t,function(t,n){(0,i.dataDefaults)(t,d).lazy||e[o(n)]()})},data:function(){return r.dataObjBuilder.call(this,s)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var u=n(0),r=n(1),i=n(2);e.exports=t.default},function(e,t,n){"use strict";function o(e){var t=(0,i.globalDefaults)(e),n=t.meta,o=(0,r.metaFunctionBuilder)("cancel",n),a=(0,r.metaFunctionBuilder)("now",n),c=(0,r.metaFunctionBuilder)("pending",n),l=(0,r.metaFunctionBuilder)("loading",n),s=(0,r.metaFunctionBuilder)("error",n),d=(0,r.metaFunctionBuilder)("default",n),f=(0,r.metaFunctionBuilder)("debounce",n),m=(0,r.metaFunctionBuilder)("resolver",n),p={metaCancel:o,metaNow:a,metaPending:c,metaLoading:l,metaError:s,metaDefault:d,metaDebounce:f,metaResolver:m},h=(0,i.computedDefaults)(e);return{beforeCreate:function(){var e=this,t=this.$options.asyncComputed;this.$options.methods=this.$options.methods||{};var n=this.$options.methods;(0,u.each)(t,function(t,l){var s=(0,i.computedDefaults)(t,h),d=r.resolverForGivenFunction.call(e,l,p,s.get,s.default,s.transform,s.error);if(!1!==s.debounce){var v=(0,u.debounce)(d,s.debounce.wait,s.debounce.options),b=c(l);n[o(l)]=function(){this[b]=!1,v.cancel()},n[a(l)]=function(){this[b]=!1,v.flush()},e[f(l)]=v}e[m(l)]=d})},beforeMount:function(){var e=this,t=this.$options.asyncComputed;(0,u.each)(t,function(t,n){var o=(0,i.computedDefaults)(t,h),u=e[m(n)],r=e[f(n)],a=!1,l=o.eager,s=!(!1===o.debounce||!o.watch),d=o.watch||o.watchClosely;e.$watch(d,function(){l&&!a?(a=!0,u()):s?(this[c(n)]=!0,r()):u()},{deep:!0,immediate:l}),s&&o.watchClosely&&e.$watch(o.watchClosely,function(){this[c(n)]=!1,r.cancel(),u()},{deep:!0,immediate:!1})})},data:function(){return r.dataObjBuilder.call(this,p,!1)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var u=n(0),r=n(1),i=n(2);e.exports=t.default}])});
//# sourceMappingURL=index.js.map